(self.webpackChunkprofiles_dev=self.webpackChunkprofiles_dev||[]).push([[8287],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return p},kt:function(){return m}});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=a.createContext({}),s=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=s(r),m=n,u=h["".concat(c,".").concat(m)]||h[m]||d[m]||o;return r?a.createElement(u,i(i({ref:t},p),{},{components:r})):a.createElement(u,i({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}h.displayName="MDXCreateElement"},5016:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return h}});var a=r(2122),n=r(9756),o=(r(7294),r(3905)),i=["components"],l={sidebar_position:3},c="Local Helm Chart artifacts",s={unversionedId:"author-docs/local-helm-chart",id:"author-docs/local-helm-chart",isDocsHomePage:!1,title:"Local Helm Chart artifacts",description:'A "local" Helm Chart artifact means the chart itself is stored locally in the profile directory.',source:"@site/docs/author-docs/local-helm-chart.md",sourceDirName:"author-docs",slug:"/author-docs/local-helm-chart",permalink:"/docs/author-docs/local-helm-chart",editUrl:"https://github.com/weaveworks/profiles/edit/main/userdocs/profiles.dev/docs/author-docs/local-helm-chart.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Remote Helm Chart artifacts",permalink:"/docs/author-docs/remote-helm-chart"},next:{title:"Kustomize patches and raw YAML artifacts",permalink:"/docs/author-docs/kustomize-and-raw"}},p=[],d={toc:p};function h(e){var t=e.components,r=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"local-helm-chart-artifacts"},"Local Helm Chart artifacts"),(0,o.kt)("p",null,'A "local" Helm Chart artifact means the chart itself is stored locally in the profile directory.\nOn installation these local manifests will be processed for addition to the GitOps repo, rather\nthan fetched down from a remote chart server.'),(0,o.kt)("p",null,"Profile Authors may wish to add remote Charts to their profile repos if they:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Are installing on a cluster with no internet access"),(0,o.kt)("li",{parentName:"ul"},"Are installing from a private Helm repository"),(0,o.kt)("li",{parentName:"ul"},"Wish to modify the chart themselves"),(0,o.kt)("li",{parentName:"ul"},"Would simply like to vendor their dependencies")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},'(If you do not believe you require a "local" Helm Chart artifact, please refer to\nthe page on ',(0,o.kt)("a",{parentName:"em",href:"/docs/author-docs/remote-helm-chart"},"remote Helm Chart")," artifacts.)")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"When you add local artifacts (meaning those with manifests stored in the profile repository)\nto your profile, we recommend noting that you have done so in your Readme, or other documentation.\nUsers of such profiles will have to provide additional flags when installing."),(0,o.kt)("p",{parentName:"div"},"Take care to also note whether you are adding a nested profile which contains local resources."))),(0,o.kt)("p",null,"To use local Helm resources, store the chart in a subdirectory within the profile\ndirectory. Taking a previous structure example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"org-profiles-repo/\n\u251c\u2500\u2500 logging-profile\n\u2502\xa0\xa0 \u251c\u2500\u2500 fluentd\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 chart\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 Chart.yaml\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 ...\n\u2502\xa0\xa0 \u2514\u2500\u2500 profile.yaml\n...\n")),(0,o.kt)("p",null,"In the ",(0,o.kt)("inlineCode",{parentName:"p"},"profile.yaml")," we add this local artifact by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"path")," key under the ",(0,o.kt)("inlineCode",{parentName:"p"},"chart"),"\ntype identifier:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'# ...\nspec:\n  # ...\n  artifacts:\n    - name: # the name of your artifact as you would like it to be known in the profile\n      chart:\n        path: "fluentd/chart" # the relative path to the chart directory\n    # ...\n')),(0,o.kt)("p",null,"The exact directory structure can be as you wish, as long as it is a child to the profile\ndirectory and the ",(0,o.kt)("inlineCode",{parentName:"p"},"path")," value in the ",(0,o.kt)("inlineCode",{parentName:"p"},"profile.yaml")," is correct."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"When ",(0,o.kt)("inlineCode",{parentName:"p"},"path")," is present, any other fields under ",(0,o.kt)("inlineCode",{parentName:"p"},"chart")," are ignored."))),(0,o.kt)("p",null,"If you would like your Chart artifact to be installed with some default values applied,\nsee the page ",(0,o.kt)("a",{parentName:"p",href:"/docs/author-docs/default-values"},"here"),"."),(0,o.kt)("p",null,"Examples of profiles with various artifacts and configurations can be found ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/weaveworks/profiles-examples"},"here"),"."))}h.isMDXComponent=!0}}]);