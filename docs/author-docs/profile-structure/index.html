<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Profiles Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Profiles Blog Atom Feed"><title data-react-helmet="true">How a profile is structured | Profiles</title><meta data-react-helmet="true" property="og:url" content="https://docs.profiles.dev//docs/author-docs/profile-structure"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How a profile is structured | Profiles"><meta data-react-helmet="true" name="description" content="profile.yaml contents"><meta data-react-helmet="true" property="og:description" content="profile.yaml contents"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_150px.png"><link data-react-helmet="true" rel="canonical" href="https://docs.profiles.dev//docs/author-docs/profile-structure"><link data-react-helmet="true" rel="alternate" href="https://docs.profiles.dev//docs/author-docs/profile-structure" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.profiles.dev//docs/author-docs/profile-structure" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.619af94b.css">
<link rel="preload" href="/assets/js/runtime~main.195c5889.js" as="script">
<link rel="preload" href="/assets/js/main.719b59cc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="something cute coming soon" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="something cute coming soon" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Profiles</b></a><a class="navbar__item navbar__link" href="/docs/tutorial-basics/setup">Getting started</a><a class="navbar__item navbar__link" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/docs/installer-docs/installing-via-gitops">Installing Profiles</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/weaveworks/profiles" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Writing Profiles</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/author-docs/profile-structure">How a profile is structured</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/remote-helm-chart">Remote Helm Chart artifacts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/local-helm-chart">Local Helm Chart artifacts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/kustomize-and-raw">Kustomize patches and raw YAML artifacts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/nested-profiles">Nested profile artifacts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/default-values">Default artifact values</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/dependencies">Dependencies between artifacts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/profile-definition-schema">Profile definition schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/author-docs/versioning">Versioning</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installing Profiles</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Managing Catalogs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">pctl</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community">Community</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/troubleshooting">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">How a profile is structured</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="profileyaml-contents"></a><code>profile.yaml</code> contents<a class="hash-link" href="#profileyaml-contents" title="Direct link to heading">#</a></h2><p>A profile is defined in a single file which <strong>must</strong> be named <code>profile.yaml</code>.
This file lives at the root of the profile directory.</p><p>The following fields are required:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> weave.works/v1alpha1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ProfileDefinition</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the name of your profile </span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Profile for deploying local nginx chart </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># a brief description of what your profile installs</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>These fields will show up later when a user searches for this profile in the catalog, as shown <a href="https://profiles.dev/docs/installer-docs/using-catalogs#inspecting-profiles-in-the-catalog" target="_blank" rel="noopener noreferrer">here</a>.</p><p>These fields are optional:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maintainer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> weaveworks </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the name(s) of the profile author</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">prerequisites</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> kubernetes 1.19 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># a list of strings detailing things the profile needs to run.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># this field is not processed at the moment, but will be soon.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Finally, the <code>spec.artifacts</code> lists all the components which the profile will install.</p><p>The following artifact types are supported:</p><ul><li><a href="/docs/author-docs/local-helm-chart">&#x27;Local&#x27; Helm Chart</a></li><li><a href="/docs/author-docs/remote-helm-chart">&#x27;Remote&#x27; Helm Chart</a></li><li><a href="/docs/author-docs/kustomize-and-raw">Raw Kubernetes yaml</a></li><li><a href="/docs/author-docs/kustomize-and-raw">Kustomize patch</a></li><li><a href="/docs/author-docs/nested-profiles">Another profile</a></li></ul><p>Please refer to their dedicated docs pages for details on how to register different artifact
types in a profile.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Please take care to name your profile artifacts sensibly e.g. <code>fluent-bit</code>, <code>nginx-server</code>.
This will help those who are installing your profile locate and refer to artifacts later.</p><p>See <a href="/docs/installer-docs/setting-values">how users use artifact names to configure values</a>
for an example of how artifact names are used.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="profile-repo-directories"></a>Profile repo directories<a class="hash-link" href="#profile-repo-directories" title="Direct link to heading">#</a></h2><p>It will be assumed that everything contained within the same directory as a <code>profile.yaml</code>
is related to that same profile.</p><p>A repository can contain multiple profiles when they are written in separate directories.
For example, the following structure shows a repo with three distinct profiles which
can be installed independently of each other:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">org-profiles-repo/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ logging-profile</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â  â””â”€â”€ profile.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ observability-profile</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â  â””â”€â”€ profile.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ our-awesome-apps</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    â””â”€â”€ profile.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The name of each profile directory <strong>must</strong> match the name given in the <code>profile.yaml</code>
<code>metadata.name</code>.</p></div></div><p>A repository can also contain just a single profile, with the <code>profile.yaml</code>
defined at the top level:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">org-profiles-repo/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ profile.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Profile directories can contain other objects related to various artifacts. These
will be demonstrated in subsequent pages.</p><p>Examples of profiles with various artifacts and configurations can be found <a href="https://github.com/weaveworks/profiles-examples" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="documenting-profiles"></a>Documenting profiles<a class="hash-link" href="#documenting-profiles" title="Direct link to heading">#</a></h2><p>When you add <a href="/docs/author-docs/local-helm-chart">&#x27;local&#x27; Helm</a>, <a href="/docs/author-docs/kustomize-and-raw">raw yaml or Kustomize</a>
artifacts to your profile, we recommend noting that you have done
so in your Readme, or other documentation. Users of such profiles will have to provide additional flags
when installing.</p><p>Take care to also note whether you are adding a <a href="/docs/author-docs/nested-profiles">nested profile</a> which contains local resources
such as the ones listed above.</p><p>Users are also able to configure values on Helm artifacts. To help them discover which values
are available, you can provide information or links to the Charts you have used in your profile.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/weaveworks/profiles/edit/main/userdocs/profiles.dev/docs/author-docs/profile-structure.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorial-basics/install-a-profile"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Install a profile</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/author-docs/remote-helm-chart"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Remote Helm Chart artifacts Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#profileyaml-contents" class="table-of-contents__link"><code>profile.yaml</code> contents</a></li><li><a href="#profile-repo-directories" class="table-of-contents__link">Profile repo directories</a></li><li><a href="#documenting-profiles" class="table-of-contents__link">Documenting profiles</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial-basics/setup">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/author-docs/profile-structure">Developer Docs: Profile Author</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installer-docs/installing-via-gitops">Developer Docs: Profile User</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/catalog-docs/add-profiles">Developer Docs: Catalog Manager</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://slack.weave.works/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/weaveworks" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li><li class="footer__item"><a href="https://github.com/weaveworks/profiles/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Report a problem with Profiles<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Weaveworks, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.195c5889.js"></script>
<script src="/assets/js/main.719b59cc.js"></script>
</body>
</html>